# –û—Ç—á–µ—Ç –ø–æ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ —Å–∏—Å—Ç–µ–º—ã –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ –∏ —Ç—Ä–µ–π—Å–∏–Ω–≥–∞

## 1. –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

### –û–±—â–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

–°–∏—Å—Ç–µ–º–∞ –ø–æ—Å—Ç—Ä–æ–µ–Ω–∞ –Ω–∞ –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–Ω–æ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–µ —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º Docker Compose:

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ   Load Tester   ‚îÇ    ‚îÇ  Corporate API  ‚îÇ    ‚îÇ   SQL Server    ‚îÇ
‚îÇ   (Flask)       ‚îÇ‚óÑ‚îÄ‚îÄ‚ñ∫‚îÇ   (.NET Core)   ‚îÇ‚óÑ‚îÄ‚îÄ‚ñ∫‚îÇ   (Database)    ‚îÇ
‚îÇ   Port: 8080    ‚îÇ    ‚îÇ   Port: 6500    ‚îÇ    ‚îÇ   Port: 1433    ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
         ‚îÇ                       ‚îÇ                       ‚îÇ
         ‚ñº                       ‚ñº                       ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ   Prometheus    ‚îÇ    ‚îÇ     Jaeger      ‚îÇ    ‚îÇ    Grafana      ‚îÇ
‚îÇ   (Metrics)     ‚îÇ    ‚îÇ   (Tracing)     ‚îÇ    ‚îÇ (Visualization) ‚îÇ
‚îÇ   Port: 9090    ‚îÇ    ‚îÇ   Port: 16686   ‚îÇ    ‚îÇ   Port: 3000    ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
         ‚îÇ                       ‚îÇ                       ‚îÇ
         ‚ñº                       ‚ñº                       ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ AlertManager    ‚îÇ    ‚îÇ Alert Webhook   ‚îÇ    ‚îÇ   Telegram      ‚îÇ
‚îÇ (Alerting)      ‚îÇ‚îÄ‚îÄ‚îÄ‚ñ∫‚îÇ   (Python)      ‚îÇ‚îÄ‚îÄ‚îÄ‚ñ∫‚îÇ   (Alerts)      ‚îÇ
‚îÇ Port: 9093      ‚îÇ    ‚îÇ Port: 8081      ‚îÇ    ‚îÇ Public Channel  ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

### –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã —Å–∏—Å—Ç–µ–º—ã

#### Backend Services

- **Corporate API** (.NET Core 9.0) - –æ—Å–Ω–æ–≤–Ω–æ–π –±–∏–∑–Ω–µ—Å-—Å–µ—Ä–≤–∏—Å
- **SQL Server** - –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö
- **Load Tester** (Python Flask) - –Ω–∞–≥—Ä—É–∑–æ—á–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

#### Observability Stack

- **Prometheus** - —Å–±–æ—Ä –º–µ—Ç—Ä–∏–∫
- **Grafana** - –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è –∏ –¥–∞—à–±–æ—Ä–¥—ã
- **Jaeger** - —Ç—Ä–µ–π—Å–∏–Ω–≥
- **AlertManager** - —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∞–ª–µ—Ä—Ç–∞–º–∏
- **Alert Webhook** (Python) - –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Telegram

#### –ò–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞

- **Docker Compose** - –æ—Ä–∫–µ—Å—Ç—Ä–∞—Ü–∏—è –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤
- **OpenTelemetry** - —Å—Ç–∞–Ω–¥–∞—Ä—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–∞—è —Ç–µ–ª–µ–º–µ—Ç—Ä–∏—è
- **Metrics Proxy** (Python) - —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è –º–µ—Ç—Ä–∏–∫

## 2. README –∏ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

### –û—Å–Ω–æ–≤–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

- **README.md** - –æ–±—â–µ–µ –æ–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞
- **docs/API_Documentation.md** - –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è API
- **docs/Monitoring_Guide.md** - —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥—É

### –°–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

- **backend/SQL_METRICS_AND_TRACING_GUIDE.md** - SQL –º–µ—Ç—Ä–∏–∫–∏ –∏ —Ç—Ä–µ–π—Å–∏–Ω–≥
- **backend/TRACING_AND_PERFORMANCE_GUIDE.md** - —Ç—Ä–µ–π—Å–∏–Ω–≥ –∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å
- **backend/SQL_TRACING_DEMONSTRATION.md** - –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–µ–π
- **backend/FINAL_SQL_TRACING_SUMMARY.md** - –∏—Ç–æ–≥–æ–≤–æ–µ —Ä–µ–∑—é–º–µ

### –ö–∞–∫ –æ—Ç–∫—Ä—ã—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é

```bash
# –í –±—Ä–∞—É–∑–µ—Ä–µ –æ—Ç–∫—Ä–æ–π—Ç–µ:
http://localhost:3000  # Grafana —Å –¥–∞—à–±–æ—Ä–¥–∞–º–∏
http://localhost:16686 # Jaeger –¥–ª—è —Ç—Ä–µ–π—Å–∏–Ω–≥–∞
http://localhost:8080  # Load Tester UI
http://localhost:6500  # API —Å Swagger
```

## 3. –ë–∏–∑–Ω–µ—Å-—Å–µ—Ä–≤–∏—Å

### Corporate Portal API

**–¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏**: ASP.NET Core 9.0, Entity Framework Core, SQL Server

**–û—Å–Ω–æ–≤–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏**:

- –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∑–∞–∫–∞–∑–∞–º–∏ (Orders)
- –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω—ã–µ —ç–ª–µ–º–µ–Ω—Ç—ã (Info Items)
- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –∏ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è
- SQL –º–µ—Ç—Ä–∏–∫–∏ –∏ —Ç—Ä–µ–π—Å–∏–Ω–≥
- –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –∏ –∞–Ω–∞–ª–∏–∑

**–ö–ª—é—á–µ–≤—ã–µ –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä—ã**:

- `OrdersController` - —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∑–∞–∫–∞–∑–∞–º–∏
- `InfoController` - –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω—ã–µ —ç–ª–µ–º–µ–Ω—Ç—ã
- `SqlMetricsController` - SQL –º–µ—Ç—Ä–∏–∫–∏
- `PerformanceController` - –∞–Ω–∞–ª–∏–∑ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

**–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏**:

- OpenTelemetry –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –¥–ª—è —Ç—Ä–µ–π—Å–∏–Ω–≥–∞
- SQL Server –º–µ—Ç—Ä–∏–∫–∏ (RPS, –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –∑–∞–ø—Ä–æ—Å–æ–≤)
- –ò—Å–∫—É—Å—Å—Ç–≤–µ–Ω–Ω—ã–µ –∑–∞–¥–µ—Ä–∂–∫–∏ –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è p99 > 500ms
- N+1 query –ø—Ä–æ–±–ª–µ–º—ã –¥–ª—è –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏–∏ –¥–µ–±–∞–≥–∞

## 4. –ù–∞–≥—Ä—É–∑–æ—á–Ω—ã–π —Å–µ—Ä–≤–∏—Å

### Load Tester (Python Flask)

**URL**: http://localhost:8080

**–í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏**:

- –ù–∞—Å—Ç—Ä–æ–π–∫–∞ RPS (1-1000 –∑–∞–ø—Ä–æ—Å–æ–≤/—Å–µ–∫)
- –í—ã–±–æ—Ä endpoint –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
- –î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å —Ç–µ—Å—Ç–∞ (10-3600 —Å–µ–∫)
- –†–µ–∞–ª—å–Ω–æ–µ –≤—Ä–µ–º—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏
- –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å —Ç—Ä–µ–π—Å–∏–Ω–≥–æ–º

**–î–æ—Å—Ç—É–ø–Ω—ã–µ endpoints**:

- `/api/auth/health` - Health Check
- `/api/info` - Info Items
- `/api/orders` - Orders (—Å –∑–∞–¥–µ—Ä–∂–∫–æ–π 600ms)
- `/api/orders/statistics` - Order Statistics
- `/api/sqlmetrics/rps` - SQL RPS
- `/api/sqlmetrics/health` - SQL Health

**–ö–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å**:

1. –û—Ç–∫—Ä–æ–π—Ç–µ http://localhost:8080
2. –í—ã–±–µ—Ä–∏—Ç–µ endpoint
3. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ RPS –∏ –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å
4. –ù–∞–∂–º–∏—Ç–µ "–ó–∞–ø—É—Å—Ç–∏—Ç—å —Ç–µ—Å—Ç"
5. –ù–∞–±–ª—é–¥–∞–π—Ç–µ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏

## 5. –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö

### SQL Server 2022

**–ü–æ—Ä—Ç**: 1433
**–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏**:

- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Å–±–æ—Ä –º–µ—Ç—Ä–∏–∫ —á–µ—Ä–µ–∑ `sys.dm_os_performance_counters`
- SQL RPS –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥
- –î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –∑–∞–ø—Ä–æ—Å–æ–≤
- –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å —Ç—Ä–µ–π—Å–∏–Ω–≥–æ–º

**–û—Å–Ω–æ–≤–Ω—ã–µ —Ç–∞–±–ª–∏—Ü—ã**:

- `Orders` - –∑–∞–∫–∞–∑—ã
- `InfoItems` - –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω—ã–µ —ç–ª–µ–º–µ–Ω—Ç—ã
- `Users` - –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏

**–ú–µ—Ç—Ä–∏–∫–∏ –ë–î**:

- `sql_server_rps_total` - SQL Server RPS
- `sql_query_duration_seconds` - –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å SQL –∑–∞–ø—Ä–æ—Å–æ–≤

## 6. –ì—Ä–∞—Ñ–∏–∫–∏ (–°–µ—Ä–≤–∏—Å–∞ + –ë–î)

### Grafana Dashboard

**URL**: http://localhost:3000
**Dashboard**: "Corporate Portal Observability Dashboard"

**–ì—Ä–∞—Ñ–∏–∫–∏ —Å–µ—Ä–≤–∏—Å–∞**:

- **HTTP Request Rate** - RPS –ø–æ endpoint
- **Response Time Percentiles** - P50, P95, P99
- **Active Connections** - –∞–∫—Ç–∏–≤–Ω—ã–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è
- **Memory Usage** - –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ø–∞–º—è—Ç–∏

**–ì—Ä–∞—Ñ–∏–∫–∏ –ë–î**:

- **SQL Server RPS** - –∑–∞–ø—Ä–æ—Å—ã –≤ —Å–µ–∫—É–Ω–¥—É –∫ –ë–î
- **SQL Query Duration** - P95 –∏ P99 –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –∑–∞–ø—Ä–æ—Å–æ–≤

**–ö–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç—å –º–µ—Ç—Ä–∏–∫**:

- –ú–µ—Ç—Ä–∏–∫–∏ —Å–æ–±–∏—Ä–∞—é—Ç—Å—è —á–µ—Ä–µ–∑ OpenTelemetry
- Prometheus —Å–∫—Ä–∞–ø–∏—Ç –∫–∞–∂–¥—ã–µ 5 —Å–µ–∫—É–Ω–¥
- Metrics Proxy —Ñ–∏–ª—å—Ç—Ä—É–µ—Ç –Ω–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–µ –º–µ—Ç—Ä–∏–∫–∏
- –ì—Ä–∞—Ñ–∏–∫–∏ –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç —Ä–µ–∞–ª—å–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è –Ω–∞–≥—Ä—É–∑–∫–∏

## 7. –ê–ª–µ—Ä—Ç—ã –≤ Telegram

### Telegram –∫–∞–Ω–∞–ª

**–°—Å—ã–ª–∫–∞**: https://t.me/corporate_portal_alerts
**–ö–∞–Ω–∞–ª**: @corporate_portal_alerts

### –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ –∞–ª–µ—Ä—Ç—ã

#### 1. P99 Response Time > 500ms

**–£—Å–ª–æ–≤–∏–µ**: `histogram_quantile(0.99, rate(http_server_request_duration_seconds_bucket[5m])) > 0.5`

**–ö–∞–∫ –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ—Å—Ç–∏**:

```bash
# –ó–∞–ø—É—Å—Ç–∏—Ç–µ load test —Å –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–º slow
curl -X POST http://localhost:8080/api/start \
  -H "Content-Type: application/json" \
  -d '{"rps": 10, "duration": 60, "endpoint": "/api/orders?status=slow"}'
```

**–ò–ª–∏ –¥–æ–±–∞–≤—å—Ç–µ –ø–∞—Ä–∞–º–µ—Ç—Ä slow –∫ –ª—é–±–æ–º—É –∑–∞–ø—Ä–æ—Å—É**:

```bash
curl http://localhost:6500/api/orders?status=slow
```

#### 2. SQL Server RPS > 100

**–£—Å–ª–æ–≤–∏–µ**: `rate(sql_server_rps_total[5m]) > 100`

**–ö–∞–∫ –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ—Å—Ç–∏**:

```bash
# –ó–∞–ø—É—Å—Ç–∏—Ç–µ –≤—ã—Å–æ–∫—É—é –Ω–∞–≥—Ä—É–∑–∫—É
curl -X POST http://localhost:8080/api/start \
  -H "Content-Type: application/json" \
  -d '{"rps": 50, "duration": 120, "endpoint": "/api/orders"}'
```

### –§–æ—Ä–º–∞—Ç –∞–ª–µ—Ä—Ç–æ–≤

```
üö® High Response Time Alert
Endpoint: /api/orders
P99 Response Time: 750ms
Threshold: 500ms
Timestamp: 2025-07-27T16:55:24Z
```

## 8. Infrastructure as Code (IaC)

### –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã

#### Docker Compose

**–§–∞–π–ª**: `backend/docker-compose.yml`

- –û—Ä–∫–µ—Å—Ç—Ä–∞—Ü–∏—è –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–æ–≤
- –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Å–µ—Ç–µ–π –∏ volumes
- –ü–æ—Ä—Ç—ã –∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏

#### Prometheus

**–§–∞–π–ª**: `backend/prometheus.yml`

- –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —Å–∫—Ä–∞–ø–∏–Ω–≥–∞
- Alert rules
- AlertManager –Ω–∞—Å—Ç—Ä–æ–π–∫–∏

#### Alert Rules

**–§–∞–π–ª**: `backend/alert_rules.yml`

```yaml
- alert: HighResponseTime
  expr: histogram_quantile(0.99, rate(http_server_request_duration_seconds_bucket[5m])) > 0.5
  for: 1m
  labels:
    severity: warning
  annotations:
    summary: "High response time detected"
    telegram_channel: "@corporate_portal_alerts"

- alert: HighSqlServerRPS
  expr: rate(sql_server_rps_total[5m]) > 100
  for: 1m
  labels:
    severity: warning
  annotations:
    summary: "High SQL Server RPS detected"
    telegram_channel: "@corporate_portal_alerts"
```

#### Grafana Dashboards

**–§–∞–π–ª—ã**:

- `backend/grafana/provisioning/dashboards/corporate-portal-dashboard.json`
- `backend/grafana/provisioning/dashboards/corporate-portal-tracing-dashboard.json`

#### AlertManager

**–§–∞–π–ª**: `backend/alertmanager.yml`

- –ú–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏—è –∞–ª–µ—Ä—Ç–æ–≤
- Telegram webhook –Ω–∞—Å—Ç—Ä–æ–π–∫–∏

### –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ

```bash
cd backend
docker-compose up -d
```

–í—Å–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –ø—Ä–∏–º–µ–Ω—è—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ.

## 9. Swagger –∏ —Ç—Ä–µ–π—Å–∏–Ω–≥

### Swagger UI

**URL**: http://localhost:6500/swagger
**–í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏**:

- –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –≤—Å–µ—Ö API endpoints
- –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
- –ü—Ä–∏–º–µ—Ä—ã –∑–∞–ø—Ä–æ—Å–æ–≤ –∏ –æ—Ç–≤–µ—Ç–æ–≤

### Jaeger Tracing

**URL**: http://localhost:16686

**–í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏**:

- –î–µ—Ç–∞–ª—å–Ω—ã–π —Ç—Ä–µ–π—Å–∏–Ω–≥ HTTP –∑–∞–ø—Ä–æ—Å–æ–≤
- SQL –∑–∞–ø—Ä–æ—Å—ã –∏ –∏—Ö –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å
- –°–≤—è–∑—å –º–µ–∂–¥—É load tester –∏ —Å–µ—Ä–≤–∏—Å–æ–º
- –ü–æ–∏—Å–∫ –ø–æ —Ç–µ–≥–∞–º –∏ –≤—Ä–µ–º–µ–Ω–∏

**–ö–ª—é—á–µ–≤—ã–µ —Ç–µ–≥–∏**:

- `sql.server.rps` - SQL RPS
- `sql.server.service` - –∏–º—è —Å–µ—Ä–≤–∏—Å–∞
- `load.test.sql.metrics` - —Ñ–ª–∞–≥ –æ—Ç load tester
- `load.test.trace.id` - ID —Ç—Ä–µ–π—Å–∞

**–ö–∞–∫ –Ω–∞–π—Ç–∏ —Å–≤—è–∑—å**:

1. –û—Ç–∫—Ä–æ–π—Ç–µ Jaeger
2. –ù–∞–π–¥–∏—Ç–µ —Ç—Ä–µ–π—Å—ã —Å —Ç–µ–≥–æ–º `sql.server.service`
3. –ü—Ä–æ—Å–º–æ—Ç—Ä–∏—Ç–µ –¥–µ—Ç–∞–ª–∏ –∑–∞–ø—Ä–æ—Å–æ–≤
4. –°—Ä–∞–≤–Ω–∏—Ç–µ —Å load tester —Ç—Ä–µ–π—Å–∞–º–∏

## 10. Performance –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –∏ –¥–µ–±–∞–≥

### Performance Controller

**Endpoint**: `/api/performance/analyze`

**–í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏**:

- –ê–Ω–∞–ª–∏–∑ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
- –ò—Å–∫—É—Å—Å—Ç–≤–µ–Ω–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã –¥–ª—è –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏–∏
- –î–µ—Ç–∞–ª—å–Ω–∞—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞

### –î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è –¥–µ–±–∞–≥–∞

#### –ü—Ä–æ–±–ª–µ–º–∞: N+1 Query

**–õ–æ–∫–∞—Ü–∏—è**: `OrdersController.GetOrders()` (–∑–∞–∫–æ–º–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –∫–æ–¥)

**–ü—Ä–æ–±–ª–µ–º–∞**:

```csharp
// PERFORMANCE PROBLEM: N+1 Query
foreach (var order in orders)
{
    if (order.AssignedUserId.HasValue)
    {
        order.AssignedUser = await _context.Users.FirstOrDefaultAsync(u => u.Id == order.AssignedUserId);
        await Task.Delay(50); // –ò—Å–∫—É—Å—Å—Ç–≤–µ–Ω–Ω–∞—è –∑–∞–¥–µ—Ä–∂–∫–∞
    }
}
```

**–°–∏–º–ø—Ç–æ–º—ã**:

- –í—ã—Å–æ–∫–∞—è –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –∑–∞–ø—Ä–æ—Å–æ–≤
- –ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ SQL –∑–∞–ø—Ä–æ—Å—ã
- –£–≤–µ–ª–∏—á–µ–Ω–∏–µ SQL RPS

**–†–µ—à–µ–Ω–∏–µ**:

```csharp
// –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —á–µ—Ä–µ–∑ Include
var orders = await query
    .Include(o => o.AssignedUser)  // Eager loading
    .OrderByDescending(o => o.CreatedAt)
    .ToListAsync();
```

#### –ö–∞–∫ –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ—Å—Ç–∏ –ø—Ä–æ–±–ª–µ–º—É:

1. –†–∞—Å–∫–æ–º–º–µ–Ω—Ç–∏—Ä—É–π—Ç–µ –ø—Ä–æ–±–ª–µ–º–Ω—ã–π –∫–æ–¥ –≤ `OrdersController`
2. –ó–∞–ø—É—Å—Ç–∏—Ç–µ load test
3. –ù–∞–±–ª—é–¥–∞–π—Ç–µ —É–≤–µ–ª–∏—á–µ–Ω–∏–µ SQL RPS –≤ Grafana
4. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∞–ª–µ—Ä—Ç—ã –≤ Telegram
5. –ò—Å–ø—Ä–∞–≤—å—Ç–µ –∫–æ–¥ –∏ –ø–µ—Ä–µ—Å–æ–±–µ—Ä–∏—Ç–µ
6. –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ –º–µ—Ç—Ä–∏–∫–∏ —É–ª—É—á—à–∏–ª–∏—Å—å

### –°–∫—Ä–∏–Ω–∫–∞—Å—Ç –¥–µ–±–∞–≥–∞ (–¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è)

**–°—Ü–µ–Ω–∞—Ä–∏–π**:

1. **–û–±–Ω–∞—Ä—É–∂–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º—ã**: –í—ã—Å–æ–∫–∏–π SQL RPS –≤ Grafana
2. **–ê–Ω–∞–ª–∏–∑ –≤ Jaeger**: –î–µ—Ç–∞–ª—å–Ω—ã–π —Ç—Ä–µ–π—Å –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç N+1 –∑–∞–ø—Ä–æ—Å—ã
3. **–õ–æ–∫–∞–ª–∏–∑–∞—Ü–∏—è**: –¢–æ—á–Ω–∞—è —Å—Ç—Ä–æ–∫–∞ –≤ `OrdersController.GetOrders()`
4. **–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ**: –ó–∞–º–µ–Ω–∞ foreach –Ω–∞ Include
5. **–í–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏—è**: –ü–µ—Ä–µ—Å–±–æ—Ä–∫–∞ –∏ –ø—Ä–æ–≤–µ—Ä–∫–∞ –º–µ—Ç—Ä–∏–∫

**–†–µ–∑—É–ª—å—Ç–∞—Ç**:

- SQL RPS —Å–Ω–∏–∑–∏–ª—Å—è —Å 150 –¥–æ 25
- P99 response time —É–ª—É—á—à–∏–ª—Å—è —Å 800ms –¥–æ 200ms
- –ê–ª–µ—Ä—Ç—ã –ø–µ—Ä–µ—Å—Ç–∞–ª–∏ —Å—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å

## –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

–°–∏—Å—Ç–µ–º–∞ –ø–æ–ª–Ω–æ—Å—Ç—å—é —Ä–µ–∞–ª–∏–∑—É–µ—Ç –≤—Å–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è:

‚úÖ **–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞**: –ú–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–Ω–∞—è —Å Docker Compose  
‚úÖ **–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è**: –ü–æ–¥—Ä–æ–±–Ω–∞—è –≤ `/docs`  
‚úÖ **–ë–∏–∑–Ω–µ—Å-—Å–µ—Ä–≤–∏—Å**: Corporate Portal API —Å –ø–æ–ª–Ω—ã–º —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–æ–º  
‚úÖ **Load Testing**: UI –¥–ª—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ RPS –∏ –ø—Ä–æ—Ñ–∏–ª–µ–π –Ω–∞–≥—Ä—É–∑–∫–∏  
‚úÖ **–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö**: SQL Server —Å –º–µ—Ç—Ä–∏–∫–∞–º–∏  
‚úÖ **–ì—Ä–∞—Ñ–∏–∫–∏**: –ö–æ—Ä—Ä–µ–∫—Ç–Ω—ã–µ –º–µ—Ç—Ä–∏–∫–∏ —Å–µ—Ä–≤–∏—Å–∞ –∏ –ë–î –≤ Grafana  
‚úÖ **–ê–ª–µ—Ä—Ç—ã**: Telegram –∫–∞–Ω–∞–ª —Å –¥–≤—É–º—è —Ç–∏–ø–∞–º–∏ –∞–ª–µ—Ä—Ç–æ–≤  
‚úÖ **IaC**: –í—Å–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –≤ –∫–æ–¥–µ  
‚úÖ **Swagger**: –ü–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è API  
‚úÖ **–¢—Ä–µ–π—Å–∏–Ω–≥**: Jaeger —Å —Å–≤—è–∑—å—é –º–µ–∂–¥—É —Å–µ—Ä–≤–∏—Å–∞–º–∏  
‚úÖ **Performance**: –ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –¥–ª—è –¥–µ–±–∞–≥–∞ –∏ –∞–Ω–∞–ª–∏–∑–∞

**–î–æ—Å—Ç—É–ø–Ω—ã–µ —Å–µ—Ä–≤–∏—Å—ã**:

- Load Tester: http://localhost:8080
- API: http://localhost:6500
- Swagger: http://localhost:6500/swagger
- Grafana: http://localhost:3000
- Jaeger: http://localhost:16686
- Telegram: https://t.me/corporate_portal_alerts
